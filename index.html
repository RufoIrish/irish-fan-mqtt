<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"
        type="text/javascript"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>MQTT-irish</title>
</head>
<style>
body{
    margin-top: 2%;
    margin-left: 20%;
    width: 50%;
    height: 50%;
}
</style>

<body>
    <h1>IOT - FAN</h1>
    <div class="card bg-light text-dark">
        <div class="card-body">
            <h2></h2>
            <button id="off">off</button>
            <button id="1">1</button>
            <button id="2">2</button>
            <button id="3">3</button>
        </div>
    </div>
</body>

</html>
<script src="browserMqtt.js"></script>
<script>
    var broker = true;
    var topic = "irish";
    var dt = new Date();

    var payload;

    var client = mqtt.connect("wss://test.mosquitto.org:8081/mqtt");

    $("#1").click(function () {
        checkInput("at 1");
    })
    $("#2").click(function () {
        checkInput("at 2");
    })
    $("#3").click(function () {
        checkInput("at 3");

    })
    $("#off").click(function () {
        checkInput("off");

    })
    function checkInput(label) {
        $("h2").text("turned " + label);
        var dt = new Date();
        payload = "turned " + label;
        client.publish(topic, payload + " " + dt);
    }
</script>